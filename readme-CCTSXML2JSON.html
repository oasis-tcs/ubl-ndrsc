<html><head><meta http-equiv="Content-Type" content="text/html; charset=us-ascii"><title>Sample conversion of an instance of CCTS XML to JSON format</title><link rel="stylesheet" href="xslstyle.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><style type="text/css">
  /* put internal CSS styles here */

</style></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="d75e1"></a>
    Sample conversion of an instance of CCTS XML to JSON format
  </h2></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#d59e2">1. 
    Sample conversion of an instance of CCTS XML to JSON format
   - CCTSXML2JSON.xsl</a></span></dt><dd><dl><dt><span class="section"><a href="#d59e13">1.1. Invocation parameters and input file</a></span></dt><dt><span class="section"><a href="#d59e64">1.2. Serializing the XML as JSON</a></span></dt><dt><span class="section"><a href="#d59e294">1.3. Interpreting the CCTS properties</a></span></dt></dl></dd><dt><span class="section"><a href="#index_">2. Index</a></span></dt></dl></div><p class="xsl-subtitle-invocation"><span class="bold"><strong>
      Available invocation parameters</strong></span></p><div class="itemizedlist"><ul type="disc" compact><li><span class="xsl-input-parameter-link"><a class="link" href="#d59e47"><span class="xsl-input-parameter-name"><code class="literal">extension-content-regex</code></span> (<span class="xsl-input-parameter-module-title">
    Sample conversion of an instance of CCTS XML to JSON format
  </span> - <span class="xsl-input-parameter-module-name"><code class="literal">CCTSXML2JSON.xsl</code></span>)</a></span></li><li><span class="xsl-input-parameter-link"><a class="link" href="#d59e59"><span class="xsl-input-parameter-name"><code class="literal">gc</code></span> (<span class="xsl-input-parameter-module-title">
    Sample conversion of an instance of CCTS XML to JSON format
  </span> - <span class="xsl-input-parameter-module-name"><code class="literal">CCTSXML2JSON.xsl</code></span>)</a></span></li><li><span class="xsl-input-parameter-link"><a class="link" href="#d59e40"><span class="xsl-input-parameter-name"><code class="literal">indent</code></span> (<span class="xsl-input-parameter-module-title">
    Sample conversion of an instance of CCTS XML to JSON format
  </span> - <span class="xsl-input-parameter-module-name"><code class="literal">CCTSXML2JSON.xsl</code></span>)</a></span></li></ul></div><p class="xsl-subtitle-specialization"><span class="bold"><strong>
   Available specialization parameter</strong></span></p><div class="itemizedlist"><ul type="disc" compact><li><span class="xsl-input-parameter-link"><a class="link" href="#d59e322"><span class="xsl-input-parameter-name"><code class="literal">c:cctInfo</code></span> (<span class="xsl-input-parameter-module-title">
    Sample conversion of an instance of CCTS XML to JSON format
  </span> - <span class="xsl-input-parameter-module-name"><code class="literal">CCTSXML2JSON.xsl</code></span>)</a></span></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d59e2"></a>1.&nbsp;
    Sample conversion of an instance of CCTS XML to JSON format
   - <code class="literal">CCTSXML2JSON.xsl</code></h2></div></div></div><p class="xsl-subtitle-filename">
              Filename: <code class="literal">CCTSXML2JSON.xsl</code></p><div class="literallayout"><p><code class="literal">$Id:&nbsp;CCTSXML2JSON.xsl,v&nbsp;1.11&nbsp;2020/04/12&nbsp;16:40:00&nbsp;admin&nbsp;Exp&nbsp;$</code></p></div><p>
    This is not to be considered final in any way.  This is an exercise
    used in the prototyping of potential JSON serializations of CCTS
    documents by converting their XML to JSON syntax.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d59e13"></a>1.1.&nbsp;Invocation parameters and input file</h3></div></div></div><p>
    Use the following invocation:
  </p><pre class="programlisting">saxon9he -xsl:CCTSXML2JSON.xsl
         {+gc=UBL-Entities-2.1.gc}
         -s:inputXML
         -o:outputJSON</pre><p>
    The <code class="literal">+gc=</code> argument is optional. When supplied, the
    program leverages the type information available in the model definition
    as required by BDNDR 1.0.
    Without such information, the serialization uses anonymous typed content
    and preserves the attribute names from the XML (which are assumed in all
    cases to have been pre-validated with project schemas) as required by
    BDNDR 1.1.
  </p><p class="xsl-output xsl-top-level"><a name="d59e32"></a><code class="literal"> <span class="bold xsl-block-other">method="text"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:output)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-output"><p>The output is simple text without XML escaping.</p></span></blockquote></div><p class="xsl-param xsl-top-level"><a name="d59e40"></a><code class="literal"><span class="bold xsl-block-name">indent</span> <span class="bold xsl-block-other">select="'yes'"</span> <span class="bold xsl-block-other">as="xsd:string"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:param)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-param"><p>The output can be indented if desired; set to "no" for continuous</p></span></blockquote></div><p class="xsl-param xsl-top-level"><a name="d59e47"></a><code class="literal"><span class="bold xsl-block-name">extension-content-regex</span> <span class="bold xsl-block-other">select="'^Extension.*$'"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:param)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-param"><p>The name for extension content</p></span></blockquote></div><p class="xsl-param xsl-top-level"><a name="d59e59"></a><code class="literal"><span class="bold xsl-block-name">gc</span> <span class="bold xsl-block-other">as="document-node(element(gc:CodeList))?"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:param)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-param"><p>
    The CCTS dictionary is expressed as a genericode file of properties such
    as the example for UBL found at <a class="ulink" href="http://docs.oasis-open.org/ubl/os-UBL-2.1/mod/UBL-Entities-2.1.gc" target="_top">http://docs.oasis-open.org/ubl/os-UBL-2.1/mod/UBL-Entities-2.1.gc</a>.
  </p><p>
    When this file is absent, the serialization presumes the use of CEFACT
    Unqualified Data Type attribute names and anonymous-typed content.
  </p></span></blockquote></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d59e64"></a>1.2.&nbsp;Serializing the XML as JSON</h3></div></div></div><p class="xsl-key xsl-top-level"><a name="d59e74"></a><code class="literal"><span class="bold xsl-block-name">c:BBIEbyName</span> <span class="bold xsl-block-match">match="Row[Value[@ColumnRef='ComponentType']/SimpleValue='BBIE']"</span> <span class="bold xsl-block-other">use="Value[@ColumnRef=('ComponentName','UBLName')]/SimpleValue"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:key)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-key"><p>Keep track of each BBIE by its XML element name in GC file</p></span></blockquote></div><p class="xsl-template xsl-top-level"><a name="d59e81"></a><code class="literal"> <span class="bold xsl-block-match">match="/*"</span> <span class="bold xsl-block-other">priority="1"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:template)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-template"><p>Getting started...</p></span></blockquote></div><p class="xsl-template xsl-top-level"><a name="d59e108"></a><code class="literal"><span class="bold xsl-block-name">c:abie</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:template)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-template"><p>Handle an ABIE by grouping its members by their name</p></span></blockquote></div><p class="xsl-template xsl-top-level"><a name="d59e125"></a><code class="literal"> <span class="bold xsl-block-match">match="*[matches(local-name(.),$extension-content-regex)]"</span> <span class="bold xsl-block-other">priority="1"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:template)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-template"><p>Catch an extension</p></span></blockquote></div><p class="xsl-template xsl-top-level"><a name="d59e135"></a><code class="literal"> <span class="bold xsl-block-match">match="*[*]"</span> <span class="bold xsl-block-other">mode="#all"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:template)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-template"><p>Handle an ASBIE (assumed by having element children)</p></span></blockquote></div><p class="xsl-template xsl-top-level"><a name="d59e150"></a><code class="literal"> <span class="bold xsl-block-match">match="*[not(*)]"</span> <span class="bold xsl-block-other">mode="c:extension"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:template)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-template"><p>Handle an extension BBIE</p></span></blockquote></div><p class="xsl-template xsl-top-level"><a name="d59e186"></a><code class="literal"> <span class="bold xsl-block-match">match="*[not(*)]"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:template)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-template"><p>Handle a BBIE (assumed by having no element children)</p></span></blockquote></div><p class="xsl-function xsl-top-level"><a name="d59e247"></a><code class="literal"><span class="bold xsl-block-name">c:indent</span><span class="xsl-block-function-param">(1)</span> <span class="bold xsl-block-other">as="xsd:string"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:function)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-function"><p>Indent the result if requested</p><p class="xsl-template-parameter">Parameter <code class="literal"><span class="bold xsl-template-parameter-name">node</span> <span class="bold xsl-template-parameter-attributes">as="node()"</span></code></p><div class="blockquote"><blockquote class="blockquote"><p>Where am I in the source nesting to determine depth?</p></blockquote></div></span></blockquote></div><p class="xsl-function xsl-top-level"><a name="d59e269"></a><code class="literal"><span class="bold xsl-block-name">c:nl</span><span class="xsl-block-function-param">(0)</span> <span class="bold xsl-block-other">as="xsd:string?"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:function)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-function"><p>Output a newline sequence if requested</p></span></blockquote></div><p class="xsl-function xsl-top-level"><a name="d59e285"></a><code class="literal"><span class="bold xsl-block-name">c:escape</span><span class="xsl-block-function-param">(1)</span> <span class="bold xsl-block-other">as="text()*"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:function)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-function"><p>Escape JSON text on the way out</p><p class="xsl-template-parameter">Parameter <code class="literal"><span class="bold xsl-template-parameter-name">node</span> <span class="bold xsl-template-parameter-attributes">as="node()"</span></code></p><div class="blockquote"><blockquote class="blockquote"><p>The node whose text value is to be emitted.</p></blockquote></div></span></blockquote></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d59e294"></a>1.3.&nbsp;Interpreting the CCTS properties</h3></div></div></div><p class="xsl-key xsl-top-level"><a name="d59e305"></a><code class="literal"><span class="bold xsl-block-name">c:cctsAttr</span> <span class="bold xsl-block-match">match="suppl"</span> <span class="bold xsl-block-other">use="@attr"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:key)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-key"><p>Find CCTS metadata name from attribute name</p></span></blockquote></div><p class="xsl-key xsl-top-level"><a name="d59e312"></a><code class="literal"><span class="bold xsl-block-name">c:terms</span> <span class="bold xsl-block-match">match="term"</span> <span class="bold xsl-block-other">use="."</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:key)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-key"><p>Find CCTS representation term information for BBIE</p></span></blockquote></div><p class="xsl-variable xsl-top-level"><a name="d59e322"></a><code class="literal"><span class="bold xsl-block-name">c:cctInfo</span> <span class="bold xsl-block-other">as="document-node()"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:variable)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-variable"><p>
    A distillation of attribute and metadata information distilled from
    <a class="ulink" href="http://docs.oasis-open.org/ubl/os-UBL-2.1/xsd/common/CCTS_CCT_SchemaModule-2.1.xsd" target="_top">http://docs.oasis-open.org/ubl/os-UBL-2.1/xsd/common/CCTS_CCT_SchemaModule-2.1.xsd</a>
  </p></span></blockquote></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="index_"></a>2.&nbsp;Index</h2></div></div></div><p><a class="link" href="#index-A"><span class="bold xsl-index-letter-title">A</span></a> <a class="link" href="#index-B"><span class="bold xsl-index-letter-title">B</span></a> <a class="link" href="#index-C"><span class="bold xsl-index-letter-title">C</span></a> <a class="link" href="#index-E"><span class="bold xsl-index-letter-title">E</span></a> <a class="link" href="#index-G"><span class="bold xsl-index-letter-title">G</span></a> <a class="link" href="#index-I"><span class="bold xsl-index-letter-title">I</span></a> <a class="link" href="#index-N"><span class="bold xsl-index-letter-title">N</span></a> <a class="link" href="#index-T"><span class="bold xsl-index-letter-title">T</span></a> </p><p><a name="index-A"></a><span class="bold xsl-index-letter-section">A</span></p><div class="itemizedlist"><ul type="disc" compact><li><span class="xsl-index-entry-link"><a class="link" href="#d59e108"><span class="xsl-index-top-level xsl-template"><span class="xsl-index-entry-name"><code class="literal">c:abie</code></span></span></a> (<span class="xsl-index-entry-module-title"><a class="link" href="#d59e64" title="1.2.&nbsp;Serializing the XML as JSON">Serializing the XML as JSON</a></span> - <span class="xsl-index-entry-module-name"><a class="link" href="#d59e2" title="1.&nbsp; Sample conversion of an instance of CCTS XML to JSON format - CCTSXML2JSON.xsl"><code class="literal">CCTSXML2JSON.xsl</code></a></span>)</span></li></ul></div><p><a name="index-B"></a><span class="bold xsl-index-letter-section">B</span></p><div class="itemizedlist"><ul type="disc" compact><li><span class="xsl-index-entry-link"><a class="link" href="#d59e74"><span class="xsl-index-top-level xsl-key"><span class="xsl-index-entry-name"><code class="literal">c:BBIEbyName</code></span></span></a> (<span class="xsl-index-entry-module-title"><a class="link" href="#d59e64" title="1.2.&nbsp;Serializing the XML as JSON">Serializing the XML as JSON</a></span> - <span class="xsl-index-entry-module-name"><a class="link" href="#d59e2" title="1.&nbsp; Sample conversion of an instance of CCTS XML to JSON format - CCTSXML2JSON.xsl"><code class="literal">CCTSXML2JSON.xsl</code></a></span>)</span></li></ul></div><p><a name="index-C"></a><span class="bold xsl-index-letter-section">C</span></p><div class="itemizedlist"><ul type="disc" compact><li><span class="xsl-index-entry-link"><a class="link" href="#d59e322"><span class="xsl-index-top-level xsl-variable"><span class="xsl-index-entry-name"><code class="literal">c:cctInfo</code></span></span></a> (<span class="xsl-index-entry-module-title"><a class="link" href="#d59e294" title="1.3.&nbsp;Interpreting the CCTS properties">Interpreting the CCTS properties</a></span> - <span class="xsl-index-entry-module-name"><a class="link" href="#d59e2" title="1.&nbsp; Sample conversion of an instance of CCTS XML to JSON format - CCTSXML2JSON.xsl"><code class="literal">CCTSXML2JSON.xsl</code></a></span>)</span></li><li><span class="xsl-index-entry-link"><a class="link" href="#d59e305"><span class="xsl-index-top-level xsl-key"><span class="xsl-index-entry-name"><code class="literal">c:cctsAttr</code></span></span></a> (<span class="xsl-index-entry-module-title"><a class="link" href="#d59e294" title="1.3.&nbsp;Interpreting the CCTS properties">Interpreting the CCTS properties</a></span> - <span class="xsl-index-entry-module-name"><a class="link" href="#d59e2" title="1.&nbsp; Sample conversion of an instance of CCTS XML to JSON format - CCTSXML2JSON.xsl"><code class="literal">CCTSXML2JSON.xsl</code></a></span>)</span></li></ul></div><p><a name="index-E"></a><span class="bold xsl-index-letter-section">E</span></p><div class="itemizedlist"><ul type="disc" compact><li><span class="xsl-index-entry-link"><a class="link" href="#d59e285"><span class="xsl-index-top-level xsl-function"><span class="xsl-index-entry-name"><code class="literal">c:escape<span class="emphasis"><em>(1)</em></span></code></span></span></a> (<span class="xsl-index-entry-module-title"><a class="link" href="#d59e64" title="1.2.&nbsp;Serializing the XML as JSON">Serializing the XML as JSON</a></span> - <span class="xsl-index-entry-module-name"><a class="link" href="#d59e2" title="1.&nbsp; Sample conversion of an instance of CCTS XML to JSON format - CCTSXML2JSON.xsl"><code class="literal">CCTSXML2JSON.xsl</code></a></span>)</span></li><li><span class="xsl-index-entry-link"><a class="link" href="#d59e47"><span class="xsl-index-top-level xsl-param"><span class="xsl-index-entry-name"><code class="literal">extension-content-regex</code></span></span></a> (<span class="xsl-index-entry-module-title"><a class="link" href="#d59e13" title="1.1.&nbsp;Invocation parameters and input file">Invocation parameters and input file</a></span> - <span class="xsl-index-entry-module-name"><a class="link" href="#d59e2" title="1.&nbsp; Sample conversion of an instance of CCTS XML to JSON format - CCTSXML2JSON.xsl"><code class="literal">CCTSXML2JSON.xsl</code></a></span>)</span></li></ul></div><p><a name="index-G"></a><span class="bold xsl-index-letter-section">G</span></p><div class="itemizedlist"><ul type="disc" compact><li><span class="xsl-index-entry-link"><a class="link" href="#d59e59"><span class="xsl-index-top-level xsl-param"><span class="xsl-index-entry-name"><code class="literal">gc</code></span></span></a> (<span class="xsl-index-entry-module-title"><a class="link" href="#d59e13" title="1.1.&nbsp;Invocation parameters and input file">Invocation parameters and input file</a></span> - <span class="xsl-index-entry-module-name"><a class="link" href="#d59e2" title="1.&nbsp; Sample conversion of an instance of CCTS XML to JSON format - CCTSXML2JSON.xsl"><code class="literal">CCTSXML2JSON.xsl</code></a></span>)</span></li></ul></div><p><a name="index-I"></a><span class="bold xsl-index-letter-section">I</span></p><div class="itemizedlist"><ul type="disc" compact><li><span class="xsl-index-entry-link"><a class="link" href="#d59e40"><span class="xsl-index-top-level xsl-param"><span class="xsl-index-entry-name"><code class="literal">indent</code></span></span></a> (<span class="xsl-index-entry-module-title"><a class="link" href="#d59e13" title="1.1.&nbsp;Invocation parameters and input file">Invocation parameters and input file</a></span> - <span class="xsl-index-entry-module-name"><a class="link" href="#d59e2" title="1.&nbsp; Sample conversion of an instance of CCTS XML to JSON format - CCTSXML2JSON.xsl"><code class="literal">CCTSXML2JSON.xsl</code></a></span>)</span></li><li><span class="xsl-index-entry-link"><a class="link" href="#d59e247"><span class="xsl-index-top-level xsl-function"><span class="xsl-index-entry-name"><code class="literal">c:indent<span class="emphasis"><em>(1)</em></span></code></span></span></a> (<span class="xsl-index-entry-module-title"><a class="link" href="#d59e64" title="1.2.&nbsp;Serializing the XML as JSON">Serializing the XML as JSON</a></span> - <span class="xsl-index-entry-module-name"><a class="link" href="#d59e2" title="1.&nbsp; Sample conversion of an instance of CCTS XML to JSON format - CCTSXML2JSON.xsl"><code class="literal">CCTSXML2JSON.xsl</code></a></span>)</span></li></ul></div><p><a name="index-N"></a><span class="bold xsl-index-letter-section">N</span></p><div class="itemizedlist"><ul type="disc" compact><li><span class="xsl-index-entry-link"><a class="link" href="#d59e269"><span class="xsl-index-top-level xsl-function"><span class="xsl-index-entry-name"><code class="literal">c:nl<span class="emphasis"><em>(0)</em></span></code></span></span></a> (<span class="xsl-index-entry-module-title"><a class="link" href="#d59e64" title="1.2.&nbsp;Serializing the XML as JSON">Serializing the XML as JSON</a></span> - <span class="xsl-index-entry-module-name"><a class="link" href="#d59e2" title="1.&nbsp; Sample conversion of an instance of CCTS XML to JSON format - CCTSXML2JSON.xsl"><code class="literal">CCTSXML2JSON.xsl</code></a></span>)</span></li></ul></div><p><a name="index-T"></a><span class="bold xsl-index-letter-section">T</span></p><div class="itemizedlist"><ul type="disc" compact><li><span class="xsl-index-entry-link"><a class="link" href="#d59e312"><span class="xsl-index-top-level xsl-key"><span class="xsl-index-entry-name"><code class="literal">c:terms</code></span></span></a> (<span class="xsl-index-entry-module-title"><a class="link" href="#d59e294" title="1.3.&nbsp;Interpreting the CCTS properties">Interpreting the CCTS properties</a></span> - <span class="xsl-index-entry-module-name"><a class="link" href="#d59e2" title="1.&nbsp; Sample conversion of an instance of CCTS XML to JSON format - CCTSXML2JSON.xsl"><code class="literal">CCTSXML2JSON.xsl</code></a></span>)</span></li></ul></div></div></div></body></html>